const { getStreamFromURL } = require("fb-watchman");
â€
â€module.exports = {
â€  config: {
â€    name: "stats",
â€    aliases: ["stat","time"],
â€    version: "1.0",
â€    author: "OtinXSandip",
â€    role: 0,
â€    shortDescription: {
â€      en: "stats",
â€    },
â€    longDescription: {
â€      en: "shows stats of bot.",
â€    },
â€    category: "system",
â€    guide: {
â€      en: "Use {p}stats to see stats of bot.",
â€    },
â€  },
â€
â€  onStart: async function ({ api, event, args, usersData, threadsData }) {
â€    try {
â€      const allUsers = await usersData.getAll();
â€      const allThreads = await threadsData.getAll();
â€      const uptime = process.uptime();
â€
â€      const hours = Math.floor(uptime / 3600);
â€      const minutes = Math.floor((uptime % 3600) / 60);
â€      const seconds = Math.floor(uptime % 60);
â€
â€      const uptimeString = `${hours}Hrs ${minutes}min ${seconds}sec`;
â€
â€      const currentDate = new Date();
â€      const options = { year: "numeric", month: "numeric", day: "numeric" };
â€      const date = currentDate.toLocaleDateString("en-US", options);
â€      const time = currentDate.toLocaleTimeString("en-ZA", {
â€        timeZone: "Africa/Johannesburg",
â€        hour12: true,
â€      });
â€
â€      const timeStart = Date.now();
â€      await api.sendMessage({
â€        body: "wait a sec bossğŸŒ",
â€      }, event.threadID);
â€
â€      const ping = Date.now() - timeStart;
â€
â€      let pingStatus = "Not smooth throw your router, buddy";
â€      if (ping < 400) {
â€        pingStatus = "Smooth like your tiny fingers";
â€      }
â€
â€      // Assuming global.utils.getStreamFromURL(img) is correctly defined
â€      const imgURL= "https://i.imgur.com/MEYPUFF.jpg";
â€      const attachment = await global.utils.getStreamFromURL(imgURL);
â€
â€      api.sendMessage({
â€        body: `ğŸ‘¾ | Bot running time\nâ˜ ${uptimeString}\n\nğŸ“… | Date: ${date}\n\nâ°| Time: ${time}\n\nğŸ‰ | Total Users\nâ˜ ${allUsers.length}\n\nğŸŒ¸ | Total threads\nâ˜ ${allThreads.length}\n\nğŸŒ | Ping: ${ping}ms\n\nPing status: ${pingStatus}`,
â€        attachment: attachment,
â€      }, event.threadID);
â€    } catch (error) {
â€      console.error(error);
â€      api.sendMessage("An error occurred while retrieving data.", event.threadID);
â€    }
â€  }
â€};
